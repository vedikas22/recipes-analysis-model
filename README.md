# Cooking Up Predictions: A Machine Learning Model for Recipe Ratings

by Vedikas Sridharan (vedikas@umich.edu)

---

## Introduction

My project uses data from two sources :

RAW_recipes.csv – Contains information on 83,782 recipes, including ingredients, nutrition facts, cooking steps, and preparation time

RAW_interactions.csv – Includes 731,927 user interactions with those recipes, such as ratings, reviews, and timestamps

What makes a recipe well-rated? We want to understand how different characteristics of a recipe like the number of ingredients, total preparation time, and nutritional content—correlate with high user ratings.

This matters because:

It helps users find recipes they'll likely enjoy.
It can guide food bloggers or platform designers to improve recipe recommendations.
It reveals trends in what people consider “good” or “worth making” when it comes to food.
From RAW_recipes.csv:

id: Unique identifier for each recipe.

name: Title of the recipe.

minutes: Total preparation time.

n_steps: Number of steps in the instructions.

n_ingredients: Number of ingredients used.

calories, fat, sugar, protein, sodium: Nutritional info per serving.

From RAW_interactions.csv:

recipe_id: Matches with id in RAW_recipes.csv.

rating: User rating from 1 to 5.

---

## Data Cleaning and Exploratory Data Analysis

To prepare the data for analysis, I began by merging two separate datasets: one containing user interactions with recipes (such as ratings) and another containing detailed recipe information. This merge was essential because it brought together user behavior and recipe characteristics, allowing for meaningful analysis of how recipe attributes influence ratings.

One of the key variables in the recipe data was a nutrition field, which was originally stored as a stringified list of values. I converted this list into individual numeric columns—such as calories, sugar, fat, and protein to make the data usable in analysis. This step reflected a necessary unpacking of aggregated information that was likely produced automatically during the recipe submission process.

I also converted the date column from string format to a datetime object. This not only standardized the format but also made the data suitable for any potential time-based analyses in the future. In some cases, the conversion revealed invalid or malformed entries, which were handled by coercing them into null values.

Another important step was dealing with unrealistic preparation time values. Specifically, some recipes listed a prep time of zero minutes, which is clearly invalid. I replaced these with missing values to avoid skewing the results, especially important for scatter plots using a log-transformed time axis.

Finally, I checked for missing values in key columns such as rating, preparation time, number of ingredients, number of steps, and nutritional content. This helped me understand the completeness of the dataset and guided decisions about which rows could be included in various parts of the analysis.

Overall, these cleaning steps were closely aligned with how the data was likely generated—through user submissions, automated scraping, and imperfect manual inputs. Cleaning the data this way improved the quality and interpretability of the visualizations and ensured that the trends I observed reflected genuine patterns rather than noise or errors.

Here is the head of the data :

|   user_id |   recipe_id | date                |   rating | review                                                                                                                                                                                                                                                                                                                                                                                                                                                          | name                                                           |     id |   minutes |   contributor_id | submitted   | tags                                                                                                                                                                                                                                                                                                                                                                                                    |   n_steps | steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | description                                                                                                                                                                                                                                                | ingredients                                                                                                                                                                                                                                                               |   n_ingredients |   calories |   total_fat_g |   sugar_g |   sodium_mg |   protein_g |   saturated_fat_g |   carbohydrates_g |
|----------:|------------:|:--------------------|---------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------|-------:|----------:|-----------------:|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------:|-----------:|--------------:|----------:|------------:|------------:|------------------:|------------------:|
|    483827 |      306785 | 2008-07-15 00:00:00 |        5 | Being a  huge fan of America's Test Kitchen  I just had  to try this and I am  sure glad I did. It is really good. Sweet  corn is  just  coming in season here  and I have  chives in my herb garden so I had all the  best ingredients. I did  use a Jalapeno from the  garden instead of the  habanero. I  just made this and I plan to have it with some chicken. I'll  bet you could use some nice peaches to change it up a bit.      Thanks for posting . | spicy nectarine and corn salsa                                 | 306785 |        40 |           377499 | 2008-06-02  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'occasion', 'low-protein', 'healthy', 'appetizers', 'side-dishes', 'fruit', 'vegetables', 'easy', 'beginner-cook', 'low-fat', 'picnic', 'summer', 'dietary', 'low-cholesterol', 'seasonal', 'low-saturated-fat', 'low-calorie', 'healthy-2', 'low-in-something', 'pitted-fruit', 'corn', 'to-go', '3-steps-or-less'] |         4 | ['in a medium bowl , toss together nectarines , corn , shallot , chile , 1 tablespoon lime juice , and salt', 'let stand at room temperature for 15 to 30 minutes', 'adjust seasoning with additional lime juice , salt , and sugar as needed', 'stir in chives']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | from my heros at america's test kitchen (cooks illustrated, summer 2008). the cooking time is actually the resting time needed for the acid in the lime juice to mellow the flavors. match this to grilled pork, chicken, shrimp, or scallops.             | ['nectarines', 'ear of corn', 'shallot', 'habanero pepper', 'lime juice', 'salt', 'sugar', 'fresh chives']                                                                                                                                                                |               8 |       95.3 |             1 |        50 |          16 |           5 |                 0 |                 7 |
|      5060 |      310237 | 2010-05-07 00:00:00 |        5 | wow red and white sweetness!  DH loved them , I found them a bit two sweet for me but a nice change to serve strawberries.  very easy recipe, but I think 8 ounces of strawvberries is not enough, if I make them again I will double the strawberries and use about half of the cool whip. (I use light cool whip.)  Thanks for posting.                                                                                                                       | french strawberry crepes                                       | 310237 |        30 |           452576 | 2008-06-19  | ['30-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'cuisine', 'preparation', 'occasion', 'breakfast', 'fruit', 'french', 'european', 'kid-friendly', 'dietary', 'berries', 'strawberries', 'brunch']                                                                                                                                                                                   |         9 | ['for the filling: toss the strawberries and brown sugar in a bowl and set aside', 'for the crepes:in a medium bowl whisk flour , egg , oil , vanilla , baking powder , cinnamon , and skim milk', 'heat frying pan over medium heat and spray with cooking spray', 'pour 1 / 3 a cup of the batter in the pan and make sure it evenly covers the bottom', 'cook each side for 30-45 seconds on each side and remove to a plate', 'when all crepes are fully cooked , spread one or two spoonfuls of cool whip into the middle , cover with a spoonful of the berry mixture', 'then wrap one side of the crepe over the mix and the other side over the first', 'cover with cool whip and more berry mix', 'repeat and enjoy !']                                                                                                             | yummy and sweet french-style strawberry breakfast crepes!                                                                                                                                                                                                  | ['strawberries', 'brown sugar', 'cool whip free', 'flour', 'egg', 'oil', 'vanilla extract', 'baking powder', 'cinnamon', 'skim milk']                                                                                                                                     |              10 |      143.5 |             5 |        25 |           3 |          10 |                 3 |                 7 |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | you can change around the types of fruits to fit your tastes and even add chocolate chips, nuts, or chocolate shavings if you'd like.                                                                                                                      |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|    935485 |      321038 | 2009-06-22 00:00:00 |        5 | Being a healthy bar this is very good.  I make just a couple of changes.  I used stevia instead of splenda.  I used recipe #81194 for the egg substitue.  And I used pure vanilla extract instead of the coffee mate.  I will be making a lot of these!                                                                                                                                                                                                         | hg s grab  n go breakfast cookies   weight watchers   2 points | 321038 |        22 |           346383 | 2008-08-24  | ['30-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'drop-cookies', 'breakfast', 'desserts', 'finger-food', 'cookies-and-brownies', 'comfort-food', 'brown-bag', 'taste-mood', 'sweet', 'to-go', 'presentation']                                                                                                                                                                |        14 | ['preheat oven to 375 degrees', 'chop raisins and craisins into small pieces', 'set aside', 'in a mixing bowl , combine the oats , flour , fiber one crumbs , splenda , brown sugar , baking powder , cinnamon , and salt', 'mix well', 'in a separate bowl , dissolve coffee -mate into 2 tablespoons hot water', 'add all other wet ingredients , and mix well', 'add liquid mixture to the dry ingredients , and stir until completely blended', "slowly sprinkle chopped raisins and craisins into the batter , making sure they don't all stick together", 'spray a large baking pan with nonstick spray , and spoon batter into 4 evenly spaced circles', 'spread batter out a bit with the back of a spoon', 'place pan in the oven for 12 - 14 minutes', 'remove pan from the oven and allow to cool slightly', "then grab 'n go !"] | i received a hungry girl email today and this was one of the recipes that were featured.  here is what the email said about the recipe:                                                                                                                    | ['oats', 'whole wheat flour', 'fiber one cereal', 'splenda granular', 'peach baby food', 'canned pumpkin', 'liquid egg substitute', 'golden raisin', 'craisins', 'brown sugar', 'sugar-free french vanilla powdered coffee creamer', 'baking powder', 'cinnamon', 'salt'] |              14 |      182.4 |             2 |        50 |           7 |          11 |                 1 |                13 |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | these things are large, fiber-packed, portable, and sooo delicious!!!! make a batch in the pm, and you'll have super-quick b-fasts for the next few ams!                                                                                                   |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | hg alternative! if you don't feel like whipping out the blender to grind that fiber one, simply leave the f1 crumbs out of the recipe. your cookies won't be as high in fiber, but they'll still taste great and clock in with a points. value of 2* each. |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|    539686 |      321038 | 2011-03-28 00:00:00 |        5 | My very health conscious daughter and I tripled this recipe and love them as cookie-sized treats. Very filling and healthy too. Thanks for posting.                                                                                                                                                                                                                                                                                                             | hg s grab  n go breakfast cookies   weight watchers   2 points | 321038 |        22 |           346383 | 2008-08-24  | ['30-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'drop-cookies', 'breakfast', 'desserts', 'finger-food', 'cookies-and-brownies', 'comfort-food', 'brown-bag', 'taste-mood', 'sweet', 'to-go', 'presentation']                                                                                                                                                                |        14 | ['preheat oven to 375 degrees', 'chop raisins and craisins into small pieces', 'set aside', 'in a mixing bowl , combine the oats , flour , fiber one crumbs , splenda , brown sugar , baking powder , cinnamon , and salt', 'mix well', 'in a separate bowl , dissolve coffee -mate into 2 tablespoons hot water', 'add all other wet ingredients , and mix well', 'add liquid mixture to the dry ingredients , and stir until completely blended', "slowly sprinkle chopped raisins and craisins into the batter , making sure they don't all stick together", 'spray a large baking pan with nonstick spray , and spoon batter into 4 evenly spaced circles', 'spread batter out a bit with the back of a spoon', 'place pan in the oven for 12 - 14 minutes', 'remove pan from the oven and allow to cool slightly', "then grab 'n go !"] | i received a hungry girl email today and this was one of the recipes that were featured.  here is what the email said about the recipe:                                                                                                                    | ['oats', 'whole wheat flour', 'fiber one cereal', 'splenda granular', 'peach baby food', 'canned pumpkin', 'liquid egg substitute', 'golden raisin', 'craisins', 'brown sugar', 'sugar-free french vanilla powdered coffee creamer', 'baking powder', 'cinnamon', 'salt'] |              14 |      182.4 |             2 |        50 |           7 |          11 |                 1 |                13 |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | these things are large, fiber-packed, portable, and sooo delicious!!!! make a batch in the pm, and you'll have super-quick b-fasts for the next few ams!                                                                                                   |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|           |             |                     |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |        |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | hg alternative! if you don't feel like whipping out the blender to grind that fiber one, simply leave the f1 crumbs out of the recipe. your cookies won't be as high in fiber, but they'll still taste great and clock in with a points. value of 2* each. |                                                                                                                                                                                                                                                                           |                 |            |               |           |             |             |                   |                   |
|     22174 |      342209 | 2008-12-28 00:00:00 |        4 | I am changing my initial review because they got better overnight! At first they seemed a bit blah but I just had one and the sweetness and flavor have improved greatly. Other great thing is these were simple and I had everything on hand! Thank you!                                                                                                                                                                                                       | banana oatmeal cookies                                         | 342209 |        40 |           361931 | 2008-12-08  | ['60-minutes-or-less', 'time-to-make', 'course', 'preparation', 'desserts', 'cookies-and-brownies']                                                                                                                                                                                                                                                                                                     |         7 | ['sift flour , soda , baking powder and salt together', 'cream together sugar and shortening', 'beat in well beaten eggs', 'stir in the vanilla , lemon juice , and banana', 'add rolled oats and flour alternately to the banana mixture , mixing well after each addition', 'stir in nuts', 'drop by teaspoonfuls onto greased baking sheet and bake in preheated 350 oven 15 to 18 minutes , or until golden']                                                                                                                                                                                                                                                                                                                                                                                                                            | a twist on an old favorite                                                                                                                                                                                                                                 | ['sugar', 'butter', 'eggs', 'mashed banana', 'vanilla', 'lemon juice', 'rolled oats', 'flour', 'baking soda', 'baking powder', 'salt', 'nuts']                                                                                                                            |              12 |      658.2 |            45 |       151 |          35 |          24 |                72 |                29 |










## Cleaning and EDA

<iframe src="assets/calories_distribution.html" width=800 height=600 frameBorder=0></iframe>